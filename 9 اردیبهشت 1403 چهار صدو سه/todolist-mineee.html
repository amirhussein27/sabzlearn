<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	<title>Document</title>
	<style>
		body{
			text-align: center;
		}
		li{
			list-style-type: none;
			display: inline;

		}
	</style>
</head>
<body>
	<h1>to do list</h1>
	<input type="text" id="myinp">
	<button class="btn btn-primary" id="addtodo">add to list</button>
	<br>
	<button class="btn btn-danger" id="clearall">cearall</button>

	<hr>
<ul class="list-group" id="myul">
	<div id="container">
<!-- 
	<li class="list-group-item">javascript	<button id="complete" class="btn btn-success">complete</button>
	<button id="remove" class="btn btn-danger">remove</button>
</li>
<li class="list-group-item">javascript	<button id="complete2" class="btn btn-success">complete</button>
	<button id="remove" class="btn btn-danger">remove</button>
</li> -->
</ul>
</div>
<script>
	let todosArray=[]
let clearall=document.getElementById("clearall")
let btncomplete=document.getElementsByClassName("btn btn-success")
let buttons=document.getElementsByTagName('button')
let addtodo=document.getElementById("addtodo")
let myul=document.getElementById("myul")
let container=document.getElementById("container")
let myinput=document.getElementById("myinp")


function addnewtodo(){

	let minpobj={
	id:todosArray.length+1,
	title:myinput.value,
	complete:false

}
myinput.value=''
console.log(todosArray);
todosArray.push(minpobj)
setlocastorage(todosArray)
todogenerator(todosArray)
}

function todogenerator(setgen){
	myul.innerHTML=''
	setgen.forEach(function(todo){
		myul.insertAdjacentHTML('beforeend',`
	<li class="list-group-item">${todo.title}	<button id="complete" class="btn btn-success" onclick="completed()">complete</button>
	<button id="remove" class="btn btn-danger" onclick="removeded(${todo.id}	)">remove</button>
</li>
	`)
	})

}

function setlocastorage(setgen){
localStorage.setItem('todos',JSON.stringify(setgen))
}


function getitems(){
let localstoragetodos=JSON.parse(localStorage.getItem('todos'))
console.log(localstoragetodos);
if (localstoragetodos) {
        todosArray = localstoragetodos
    } else {
        todosArray = []
    }

	todogenerator(todosArray)
}

function clearallfunc(){
	
}

function clearallfunc(){
    todosArray = []
localStorage.removeItem('todos')
let lis=document.querySelectorAll('.list-group-item')
for(let i=0;i<lis.length;i++){lis[i].remove()}

}
function removeded(todoid){
	let localStorageTodos = JSON.parse(localStorage.getItem('todos'))
todosArray = localStorageTodos

let maintodoindex=todosArray.findIndex(function(todo){
	return todo.id===todoid
})
console.log(maintodoindex);
todosArray.splice(maintodoindex,1)
setlocastorage(todosArray)
todogenerator(todosArray)


	let mine=event.target.parentElement
console.log(mine);
	mine.remove(JSON.stringify(mine.innerText))
	
}


addtodo.addEventListener('click',addnewtodo)
window.addEventListener('load',getitems)
clearall.addEventListener('click',clearallfunc)
</script>
</body>
</html>